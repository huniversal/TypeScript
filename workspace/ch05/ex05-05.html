ã…“
<body>
  <div id="todo">
    <header>
      <h1>Todo List - ëª©ë¡ ì¡°íšŒ ğŸ¦</h1>
      <!-- í˜ì´ì§€ ì œëª© -->
    </header>
    <div id="main">
      <div id="container">
        <ul>
          <li>
            <h2>ì‡¼í•‘ ëª©ë¡</h2>
            <!-- ì„¹ì…˜ ì œëª© -->
            <div class="todoinput">
              <!-- ì‚¬ìš©ìê°€ í•  ì¼ ì…ë ¥ -->
              <input type="text" autofocus onkeyup="handleKeyup(event)" />
              <!-- ë²„íŠ¼ í´ë¦­ìœ¼ë¡œ í•  ì¼ ì¶”ê°€ -->
              <button type="button" onclick="handleAdd()">ì¶”ê°€</button>
            </div>

            <!-- í•  ì¼ ë¦¬ìŠ¤íŠ¸ê°€ í‘œì‹œë  ê³µê°„ -->
            <ul class="todoList"></ul>
          </li>
        </ul>
      </div>
    </div>
    <footer>
      <p>ë©‹ìŸì´ ì‚¬ìì²˜ëŸ¼ FrontEnd BootCamp</p>
      <!-- í•˜ë‹¨ ë¬¸êµ¬ -->
    </footer>
  </div>

  <script>
    // ğŸš€ í•œê±´ì˜ todo ê°ì²´ë¥¼ ë°›ì•„ì„œ DOM ê°ì²´ë¡œ ë§Œë“¤ì–´ ë°˜í™˜í•˜ëŠ” ê¸°ëŠ¥
    function getTodoItemElem(item) {
      const liElem = document.createElement("li"); // <li> ìƒì„±
      liElem.dataset.no = item.no;
      liElem.dataset.done = item.done;

      const noElem = document.createElement("span"); // ë²ˆí˜¸ ì¶œë ¥ìš© <span>
      const titleElem = document.createElement("span"); // ì œëª© ì¶œë ¥ìš© <span>
      const deleteElem = document.createElement("button"); // ì‚­ì œ ë²„íŠ¼

      const noTxt = document.createTextNode(item.no); // ë²ˆí˜¸ í…ìŠ¤íŠ¸
      const titleTxt = document.createTextNode(item.title); // ì œëª© í…ìŠ¤íŠ¸
      const deleteTxt = document.createTextNode("ì‚­ì œ"); // ë²„íŠ¼ í…ìŠ¤íŠ¸

      // ìš”ì†Œ ì¡°ë¦½
      noElem.appendChild(noTxt);
      titleElem.appendChild(titleTxt);
      deleteElem.setAttribute("type", "button");
      deleteElem.appendChild(deleteTxt);

      liElem.appendChild(noElem);
      liElem.appendChild(titleElem);
      liElem.appendChild(deleteElem);
      liElem.setAttribute("tabindex", 0); // í‚¤ë³´ë“œ ì ‘ê·¼ì„± ìœ„í•œ í¬ì»¤ìŠ¤

      // ğŸ’¬ ë°©ë²• 1
      // liElem.dataset.no = item.no; // ê³ ìœ  ë²ˆí˜¸ë¥¼ data-no ì†ì„±ìœ¼ë¡œ ì €ì¥

      // ğŸ’¬ ë°©ë²• 2
      // liElem.setAttribute("data-no", item.no);

      // ğŸš€ ì‚­ì œ ë²„íŠ¼ í´ë¦­ ì‹œ deleteItem í•¨ìˆ˜ í˜¸ì¶œ (ë°©ë²• 1, ë¯¸ì‚¬ìš©)

      deleteElem.addEventListener("click", function (event) {
        const btn = event.target;
        const liNode = btn.closest("li");
        deleteItem(liNode.dataset.no);
      });

      titleElem.addEventListener("click", function (event) {
        const btn = event.target;
        const liNode = btn.closest("li");
        toggleDone(liNode.dataset.no);
      });

      // ğŸš€ ì‚­ì œ ë²„íŠ¼ í´ë¦­ ì‹œ deleteItem í˜¸ì¶œ (ë°©ë²• 2, ì¸ë¼ì¸ ë°©ì‹)
      deleteElem.setAttribute("onclick", `deleteItem(${item.no})`);

      return liElem; // ì™„ì„±ëœ li ë°˜í™˜
    }

    // ğŸš€ ì¶”ê°€ ë²„íŠ¼ í´ë¦­ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬
    function handleAdd() {
      const inputElem = document.querySelector(".todoinput > input");
      if (inputElem.value !== "") {
        addItem(inputElem.value); // ì…ë ¥ê°’ìœ¼ë¡œ í•­ëª© ì¶”ê°€
        inputElem.value = ""; // ì…ë ¥ì°½ ì´ˆê¸°í™”
        inputElem.focus(); // í¬ì»¤ìŠ¤ ë³µì›
      }
    }

    // ğŸš€ ì—”í„° í‚¤ ì…ë ¥ ì‹œ í•­ëª© ì¶”ê°€
    function handleKeyup(event) {
      if (event.key === "Enter") {
        handleAdd();
      }
    }

    // ğŸš€ ìƒˆë¡œìš´ í•  ì¼ í•­ëª© ì¶”ê°€
    function addItem(title) {
      const todoList = document.querySelector(".todoList"); // ë¦¬ìŠ¤íŠ¸ ì»¨í…Œì´ë„ˆ

      const item = {
        no: todoList.children.length + 1, // í•­ëª© ë²ˆí˜¸ (ë¦¬ìŠ¤íŠ¸ ê¸¸ì´ ê¸°ì¤€)
        title, // ì‚¬ìš©ìê°€ ì…ë ¥í•œ ì œëª©
        done: false, // ì´ˆê¸° ìƒíƒœëŠ” ë¯¸ì™„ë£Œ
      };

      const todoLi = getTodoItemElem(item); // li ìƒì„±
      console.log(todoLi);
      todoList.appendChild(todoLi); // ë¦¬ìŠ¤íŠ¸ì— ì¶”ê°€
    }

    // ğŸš€ (ë¯¸ì‚¬ìš©) ì™„ë£Œ / ë¯¸ì™„ë£Œ ìƒíƒœ í† ê¸€ìš© í•¨ìˆ˜
    function toggleDone(no) {
      const targetLi = document.querySelector(`.todoList >li[data-no="${no}"]`);
      const done = targetLi.dataset.done === "true";
      console.log(typeof done, done);
      const titleEl = targetLi.querySelector("span:last-of-type"); // ë§ˆì§€ë§‰ span ì°¾ì•„ì˜¤ê¸°
      if (done) {
        // doneì´ trueë¼ë©´ ì™„ë£Œ -> ë¯¸ì™„ë£Œë¡œ ìˆ˜ì •
        titleEl.appendChild(titleEl.firstChild.firstChild);
        titleEl.firstChild.remove();
      } else {
        // doneì´ falseë¼ë©´ ë¯¸ì™„ë£Œ -> ì™„ë£Œë¡œ ìˆ˜ì •
        const sElem = document.createElement("s"); // <s>
        sElem.appendChild(titleEl.firstChild);
        titleEl.appendChild(sElem);
      }
      targetLi.dataset.done = !done; // ì™„ë£Œ ì—¬ë¶€ í† ê¸€
    }

    // ğŸš€ í•­ëª© ì‚­ì œ í•¨ìˆ˜
    function deleteItem(no) {
      const targetLi = document.querySelector(`.todoList >li[data-no="${no}"]`);
      targetLi.remove(); // í•´ë‹¹ ë²ˆí˜¸ì˜ í•­ëª© ì‚­ì œ
    }
  </script>
</body>
